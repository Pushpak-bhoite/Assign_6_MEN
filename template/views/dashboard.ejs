<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- lineicons -->
    <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
    <link rel="stylesheet" href="./css/sidebar.css">
    <link rel="stylesheet" href="/sidebar.css">

</head>

<body>

    <div class="wrapper">
        <aside id="sidebar">
            <div class="d-flex align-items-center">
                <button id="toggle-btn" type="button">
                    <i class="lni lni-grid-alt"></i>
                </button>
                <div class="sidebar-logo">
                    <a href="#">CodzSword</a>
                </div>
            </div>

            <ul class="sidebar-nav">

                <li class="sidebar-item">
                    <a href="#" class="sidebar-link">
                        <span class="liText">USERS</span>
                    </a>
                </li>

                <li class="sidebar-item" id="userId">
                    <a href="#" class="sidebar-link has-dropdown collapsed" data-bs-toggle="collapse"
                        data-bs-target="#user" aria-expanded="true" aria-controls="user">
                        <i class="liText fa-solid fa-user"></i>

                        <span>USERS</span>
                    </a>

                    <ul id="user" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link" id="blocked"> Active  </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link " id="un-blocked"> IN-ACTIVE</a>
                        </li>
                        <li class="sidebar-item">
                     
                    </ul>
                </li>


                <li class="sidebar-item" id="productId">
                    <a href="#" class="sidebar-link has-dropdown collapsed" data-bs-toggle="collapse"
                        data-bs-target="#product" aria-expanded="true" aria-controls="product">
                        <i class=" fa-brands fa-product-hunt"></i>
                        <span>Product</span>
                    </a>

                    <ul id="product" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link"> Create </a>
                        </li>
                    </ul>
                </li>

                <li class="sidebar-item " id="regionId">
                    <a href="#" class="sidebar-link has-dropdown collapsed" data-bs-toggle="collapse"
                        data-bs-target="#region" aria-expanded="true" aria-controls="region">
                        <i class=" liText fa-solid fa-location-dot"></i>
                        <span class="liText">REGION</span>
                    </a>

                    <ul id="region" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link">State </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link "> City</a>
                        </li>
                    </ul>
                </li>

                <li class="sidebar-item">
                    <a href="#" class="sidebar-link">
                        <i class="liText fa-solid fa-address-book"></i>
                        <span class="liText">CONTACT</span>
                    </a>
                </li>


            </ul>

            <div class="sidebar-footer pb-5">
                <a href="/logout" class="sidebar-link">
                    <i class="lni lni-exit" style="font-size: x-large;"></i>
                    <span>Logout</span>
                </a>
            </div>

        </aside>

        <div class="main p-3">
            <div id="UserDash">
                <table class="table table-dark">
                    <h1 class="text-white">Hello... Admin</h1>
                    <thead>
                        <tr>
                            <!-- <th scope="col">sr</th> -->
                            <th scope="col">FirstName</th>
                            <th scope="col">LastName</th>
                            <th scope="col">Mobile</th>
                            <th scope="col">Gender</th>
                            <th scope="col">Email</th>
                            <th scope="col">Operations</th>
                            <th scope="col">State</th>

                        </tr>

                    </thead>
                    <tbody class="active"> 
                        <div class="text-center active"><h2> Active Users </h2> </div>
                        <%if(locals.Udata){ Udata.forEach(data=> {

                            if(data.frole === "Admin" || data.state === false)
                            { return; // Skip this iteration
                            }%>
                        
                                <td>
                                    <%= data.ffname %>
                                </td>
                                <td>
                                    <%= data.flname %>
                                </td>
                                <td>
                                    <%= data.fphone %>
                                </td>
                                <td>
                                    <%= data.fgender %>
                                </td>
                                <td>
                                    <%= data.fmail %>
                                </td>

                                <td>
                                    <button type="button" class="btn btn-warning">Edit</button>
                                    <button type="button" class="btn btn-danger">Delete</button>
                                </td>
                                <td>

                                    <%= data.state %>

                                </td>

                                </tr>
                                <% });%>
                                    <% } %>

                    </tbody>

                    <tbody class="in-active">

                        <%if(locals.Udata){ Udata.forEach(data=> {

                            if(data.frole === "Admin" || data.state === true)
                            { return; // Skip this iteration
                            }%>
                            <div class="text-center in-active"><h2> In-Active Users </h2> </div>
                        
                                <td>
                                    <%= data.ffname %>
                                </td>
                                <td>
                                    <%= data.flname %>
                                </td>
                                <td>
                                    <%= data.fphone %>
                                </td>
                                <td>
                                    <%= data.fgender %>
                                </td>
                                <td>
                                    <%= data.fmail %>
                                </td>

                                <td>
                                    <button type="button" class="btn btn-warning">Edit</button>
                                    <button type="button" class="btn btn-danger">Delete</button>
                                </td>
                                <td>

                                    <%= data.state %>

                                </td>

                                </tr>
                                <% });%>
                                    <% } %>

                    </tbody>
                </table>
            </div>

            <div id="regionDash">


                <table class="table">
                    <thead>
                        <tr>

                            <th scope="col">sr</th>
                            <th scope="col">FirstName</th>
                            <th scope="col">LastName</th>
                            <th scope="col">Email</th>
                            <th scope="col">Mobile</th>
                            <th scope="col">Gender</th>
                            <th scope="col">Role</th>
                            <th scope="col">Block</th>
                            <th scope="col">Update</th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">1</th>
                            <td>Mark</td>
                            <td>Otto</td>
                            <td>@mdo</td>
                            <td>123445234234</td>
                            <td>hello00000000000</td>
                            <td>@mdo</td>
                            <td>@mdo</td>
                            <td>@mdo</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div id="productDash">
                <!-- Product list  -->
                <div class="row" id="productList">
                    <!-- Product Form -->
                    <%- include('./partials/AdminProductForm.ejs') %>

                        <div class="col-12 col-md-6 d-flex">

                        </div>
                        <!-- Table Element -->
                        <div class="card border-0">

                            <div class="card-body  bg-dark text-white">
                                <table class="table table-dark">
                                    <thead>
                                        <tr>
                                            <th scope="col">UserId</th>
                                            <th scope="col">Title</th>
                                            <th scope="col">Quantity</th>
                                            <th scope="col">Price</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- need to add users info via mongo db -->

                                        <% if(locals.Pdata){ Pdata.forEach((i)=>{ %>
                                            <tr>
                                                <td>
                                                    <%=i.userId%>
                                                </td>
                                                <td>
                                                    <%=i.pname%>
                                                </td>
                                                <td>
                                                    <%=i.pquantity%>
                                                </td>
                                                <td>
                                                    <%=i.pprice%>
                                                </td>
                                            </tr>
                                            <% }) }%>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                </div>
            </div>

        </div>
    </div>



    <!-- Bootsatrp -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <!-- jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>

        $(document).ready(function () {

            const hamburger = $("#toggle-btn");

            $("#toggle-btn").click(function () {
                $("#sidebar").toggleClass("expand");
            });

            // $('#UserDash').hide();
            // $('#productDash').hide();
            $('#regionDash').hide();
            $('.in-active').hide();

            $("#blocked").click(function () {
                $('.active').show();
                $('.in-active').hide();
                $('#regionDash').hide();
                $('#productDash').hide();
            });

            $("#un-blocked").click(function () {
                $('.active').hide();
                $('.in-active').show();
                $('#regionDash').hide();
                $('#productDash').hide();
            });
            $("#regionId").click(function () {
                $('.active').hide();
                $('.in-active').hide();
                $('#regionDash').show();
                $('#productDash').hide();
            });
            $("#productId").click(function () {
                $('.active').hide();
                $('.in-active').hide();
                $('#regionDash').hide();
                $('#productDash').show();
            });

        });

    </script>

</body>

</html>